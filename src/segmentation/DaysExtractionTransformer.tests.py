import unittest

from src.segmentation.DaysExtractionTransformer import extract_days

class UnitTests(unittest.TestCase):
    
    def test_extract_days(self):
        paths = [
            ".../2018_05_03/B00001391_21I6X0_20180503_072551E.JPG",
            ".../2018_05_03/B00001388_21I6X0_20180503_072550E.JPG",
            ".../2018_05_05/B00005976_21I6X0_20180505_091809E.JPG",
            ".../2018_05_05/B00005977_21I6X0_20180505_091832E.JPG",
            ".../2018_05_05/B00005978_21I6X0_20180505_091855E.JPG",
            ".../2018_05_07/B00010848_21I6X0_20180507_170236E.JPG",
            ".../2018_05_07/B00010850_21I6X0_20180507_170322E.JPG",
            ".../2018_05_07/B00010851_21I6X0_20180507_170345E.JPG",
            ".../2018_05_08/B00000014_21I6X0_20180508_110446E.JPG",
            ".../2018_05_08/B00000024_21I6X0_20180508_110906E.JPG",
            ".../2018_05_08/B00000025_21I6X0_20180508_110934E.JPG",
        ]

        res = extract_days(paths)

        assert_res = [
            [
                ".../2018_05_03/B00001388_21I6X0_20180503_072550E.JPG",
                ".../2018_05_03/B00001391_21I6X0_20180503_072551E.JPG",
            ],
            [
                ".../2018_05_05/B00005976_21I6X0_20180505_091809E.JPG",
                ".../2018_05_05/B00005977_21I6X0_20180505_091832E.JPG",
                ".../2018_05_05/B00005978_21I6X0_20180505_091855E.JPG",
            ],
            [
                ".../2018_05_07/B00010848_21I6X0_20180507_170236E.JPG",  
                ".../2018_05_07/B00010850_21I6X0_20180507_170322E.JPG",
                ".../2018_05_07/B00010851_21I6X0_20180507_170345E.JPG",
            ],
            [
                ".../2018_05_08/B00000014_21I6X0_20180508_110446E.JPG",
                ".../2018_05_08/B00000024_21I6X0_20180508_110906E.JPG",
                ".../2018_05_08/B00000025_21I6X0_20180508_110934E.JPG",          
            ],
        ]

        self.assertEqual(assert_res, res)

if __name__ == '__main__':
    suite = unittest.TestLoader().loadTestsFromTestCase(UnitTests)
    unittest.TextTestRunner(verbosity=2).run(suite)
